{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import'../css/TodoList.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const TodoList=_ref=>{let{setPage}=_ref;const[tasks,setTasks]=useState([]);const[newTask,setNewTask]=useState('');const[editingTask,setEditingTask]=useState(null);const[editedData,setEditedData]=useState('');const[editedStatus,setEditedStatus]=useState(false);useEffect(()=>{fetchTasks();},[]);const navigate=useNavigate();const fetchTasks=()=>{const email=localStorage.getItem('userEmail');fetch(\"https://nm-backend-ctri.onrender.com/getTasks/\".concat(email)).then(response=>response.json()).then(data=>{setTasks(data);if(data.length>0){console.log(data.length);const userUid=data[0].uid;localStorage.setItem('userUid',userUid);}else{console.log(\"no todo\");}}).catch(error=>console.error('Error fetching tasks:',error));};const addTask=()=>{const userId=localStorage.getItem('userId');fetch('https://nm-backend-ctri.onrender.com/addTodo',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({data:newTask,status:false,userCredentials:{id:localStorage.getItem(\"userUid\")}})}).then(()=>{setNewTask('');fetchTasks();}).catch(error=>console.error('Error adding task:',error));};const editTask=task=>{setEditingTask(task.taskId);setEditedData(task.data);setEditedStatus(task.status);};const toggleStatus=task=>{setEditedData(task.data);setEditedStatus(!task.status);};const saveTask=()=>{const updatedTask={todoId:editingTask,data:editedData,status:editedStatus,userCredentials:{id:localStorage.getItem(\"userUid\")}};console.log(updatedTask);fetch(\"https://nm-backend-ctri.onrender.com/updateTask\",{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(updatedTask)}).then(()=>{setEditingTask(null);setEditedData('');setEditedStatus(false);fetchTasks();}).catch(error=>console.error('Error updating task:',error));};const deleteTask=task=>{fetch(\"https://nm-backend-ctri.onrender.com/deleteTasks/\".concat(task.taskId),{method:'DELETE'}).then(()=>{fetchTasks();}).catch(error=>console.error('Error deleting task:',error));};const goToLogin=()=>{localStorage.clear();navigate('/');};return/*#__PURE__*/_jsxs(\"div\",{className:\"todo-list-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Todo List\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"logout\",onClick:goToLogin,children:\"logout\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"task-input\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Add a new task\",value:newTask,onChange:e=>setNewTask(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:addTask,children:\"Add\"})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"task-list\",children:tasks.length===0?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"p\",{children:\"No task\"})}):/*#__PURE__*/_jsx(_Fragment,{children:tasks.map(task=>/*#__PURE__*/_jsxs(\"li\",{className:\"task-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:task.status?'completed':'not-completed',onClick:()=>toggleStatus(task),children:task.data}),/*#__PURE__*/_jsxs(\"div\",{className:\"task-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editTask(task),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteTask(task),children:\"Delete\"})]})]},task.taskId))})}),editingTask!==null&&/*#__PURE__*/_jsxs(\"div\",{className:\"edit-task\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editedData,onChange:e=>setEditedData(e.target.value)}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:editedStatus,onChange:()=>setEditedStatus(!editedStatus)}),\"Completed\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:saveTask,children:\"Save\"})]})]});};export default TodoList;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TodoList","_ref","setPage","tasks","setTasks","newTask","setNewTask","editingTask","setEditingTask","editedData","setEditedData","editedStatus","setEditedStatus","fetchTasks","navigate","email","localStorage","getItem","fetch","concat","then","response","json","data","length","console","log","userUid","uid","setItem","catch","error","addTask","userId","method","headers","body","JSON","stringify","status","userCredentials","id","editTask","task","taskId","toggleStatus","saveTask","updatedTask","todoId","deleteTask","goToLogin","clear","className","children","type","onClick","placeholder","value","onChange","e","target","map","checked"],"sources":["/home/divum/Documents/project/Nm/new/Task3_interactive_frontend/todo-interactive/src/components/Todo.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport '../css/TodoList.css';\n\nconst TodoList = ({ setPage }) => {\n  const [tasks, setTasks] = useState([]);\n  const [newTask, setNewTask] = useState('');\n  const [editingTask, setEditingTask] = useState(null);\n  const [editedData, setEditedData] = useState('');\n  const [editedStatus, setEditedStatus] = useState(false);\n\n  useEffect(() => {\n    fetchTasks();\n  }, []);\n\n  const navigate = useNavigate();\n\n\n  const fetchTasks = () => {\n    const email = localStorage.getItem('userEmail');\n\n    fetch(`https://nm-backend-ctri.onrender.com/getTasks/${email}`)\n      .then((response) => response.json())\n      .then((data) => {\n        setTasks(data);\n        if (data.length > 0) {\n          console.log(data.length);\n          const userUid = data[0].uid;\n          localStorage.setItem('userUid', userUid);\n        } else {\n          console.log(\"no todo\");\n        }\n      })\n      .catch((error) => console.error('Error fetching tasks:', error));\n  };\n\n  const addTask = () => {\n    const userId = localStorage.getItem('userId');\n\n    fetch('https://nm-backend-ctri.onrender.com/addTodo', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        data: newTask,\n        status: false,\n        userCredentials: {\n          id: localStorage.getItem(\"userUid\"),\n        },\n      }),\n    })\n      .then(() => {\n        setNewTask('');\n        fetchTasks();\n      })\n      .catch((error) => console.error('Error adding task:', error));\n  };\n\n  const editTask = (task) => {\n    setEditingTask(task.taskId);\n    setEditedData(task.data);\n    setEditedStatus(task.status);\n  };\n\n  const toggleStatus = (task) => {\n    setEditedData(task.data);\n    setEditedStatus(!task.status);\n  };\n\n  const saveTask = () => {\n    const updatedTask = {\n      todoId: editingTask,\n      data: editedData,\n      status: editedStatus,\n      userCredentials: {\n        id: localStorage.getItem(\"userUid\"),\n      },\n    };\n    console.log(updatedTask);\n\n    fetch(`https://nm-backend-ctri.onrender.com/updateTask`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(updatedTask),\n    })\n      .then(() => {\n        setEditingTask(null);\n        setEditedData('');\n        setEditedStatus(false);\n        fetchTasks();\n      })\n      .catch((error) => console.error('Error updating task:', error));\n  };\n\n  const deleteTask = (task) => {\n    fetch(`https://nm-backend-ctri.onrender.com/deleteTasks/${task.taskId}`, {\n      method: 'DELETE',\n    })\n      .then(() => {\n        fetchTasks();\n      })\n      .catch((error) => console.error('Error deleting task:', error));\n  };\n\n  const goToLogin = () => {\n    localStorage.clear();\n    navigate('/');\n  };\n\n  return (\n    <div className=\"todo-list-container\">\n      <h1>Todo List</h1>\n      <button type='button' className='logout' onClick={goToLogin}>logout</button>\n      <div className=\"task-input\">\n        <input\n          type=\"text\"\n          placeholder=\"Add a new task\"\n          value={newTask}\n          onChange={(e) => setNewTask(e.target.value)}\n        />\n        <button onClick={addTask}>Add</button>\n      </div>\n\n      <ul className=\"task-list\">\n        {tasks.length===0 ? (<>\n        <p>No task</p>\n        </>) : (<>\n        {/* {console.log(tasks[0].data,\"if\")} */}\n          {tasks.map((task) => (\n            <li key={task.taskId} className=\"task-item\">\n              <span\n                className={task.status ? 'completed' : 'not-completed'}\n                onClick={() => toggleStatus(task)}\n              >\n                {task.data}\n              </span>\n              <div className=\"task-actions\">\n                <button onClick={() => editTask(task)}>Edit</button>\n                <button onClick={() => deleteTask(task)}>Delete</button>\n              </div>\n            </li>\n          ))}\n        </>)}\n      </ul>\n      {editingTask !== null && (\n        <div className=\"edit-task\">\n          <input\n            type=\"text\"\n            value={editedData}\n            onChange={(e) => setEditedData(e.target.value)}\n          />\n          <label>\n            <input\n              type=\"checkbox\"\n              checked={editedStatus}\n              onChange={() => setEditedStatus(!editedStatus)}\n            />\n            Completed\n          </label>\n          <button onClick={saveTask}>Save</button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TodoList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}